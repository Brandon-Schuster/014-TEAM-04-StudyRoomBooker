<%- include ('../partials/header') %>
    <%- include ('../partials/menu') %>
    
    <section id="homepage">
        <body>
            <main>
                <div class="container">
                    <div class="row">
                        <div class="date-navigation">
                            <button class="arrow-btn" id="prev-day">&larr;</button>
                            <span class="current-date"><%= new Date().toLocaleDateString() %></span>
                            <button class="arrow-btn" id="next-day">&rarr;</button>
                        </div>
                        <div class="form-box" id="tablebook">
                            <div class="scrollable-container">

                                <% for (let hour = 8; hour <= 18; hour++) { %>
                                    <% let displayHour = hour % 12 || 12; %>
                                    <% let displayNextHour = (hour + 1) % 12 || 12; %>
                                    <h3 class="time-heading"><%= displayHour %><%= hour < 12 ? 'AM' : 'PM' %> - <%= displayNextHour %><%= (hour + 1) < 12 ? 'AM' : 'PM' %></h3>
                                    <table class="center-table">
                                        <tr class="tablehead">
                                            <th>Tables 1 - 5</th>
                                            <th>Tables 5 - 10</th>
                                        </tr>
                                        <% if (reserve) {  
                                         reserve.forEach(function(r) { %>
                                            <tr>
                                                <td>
                                                    <div class="reserve-info" id >Table <%= r.roomname %></div>
                                                    
                                                    <form action="/tableBook" method="GET" id="temp">
                                                        <input type = "hidden"id ="tableid" name="tableid"  value="<%=r.roomid%>"/>
                                                        <input type= "hidden" name="roomname" value="table<%=r.name%>"/>
                                                
                                                        <button type="submit">Reserve</button>
                                                    
                                                    </form>
                                                </td>
                                                <td>
                                                    <div class="reserve-info">Table <%= r.roomname %></div>
                                                    
                                                    <form action="/tableBook" method="GET" id ="temp">
                                                        <input type = "hidden" id = "tableid" name = "tableid" value="<%=r.roomid%>"/>
                                                        <input type= "hidden" name ="roomname" value="table<%=r.name%>"/>
                                                        <% if(r.bookingstatus){ %>
                                                            <button type="submit">Cancel</button>
                                                        <% } else{ %>
                                                            <button type="submit">Reserve</button>
                                                        <% } %>
                                                    </form>
                                                    
                                                </td>
                                            </tr>
                                            <%  }); %> 
                                        <% } %>
                                        <% } %>
                                        
                                    </table>
                                    <br>
                                    <br>

                              
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </body>
    </section>
        <%- include ('../partials/footer') %>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const currentDate = new Date();
            let displayedDate = new Date(currentDate);
    
            const prevDayButton = document.getElementById("prev-day");
            const nextDayButton = document.getElementById("next-day");
            const currentDateElement = document.querySelector(".current-date");
    
            function updateDisplayedDate() {
            currentDateElement.textContent = displayedDate.toLocaleDateString();
            }
    
            prevDayButton.addEventListener("click", function () {
            displayedDate.setDate(displayedDate.getDate() - 1);
            updateDisplayedDate();
            });
    
            nextDayButton.addEventListener("click", function () {
            displayedDate.setDate(displayedDate.getDate() + 1);
            updateDisplayedDate();
            });
        });
        </script>
        
    <style>
        .time-heading {
            text-align: center;
            margin-bottom: 10px;
        }
    </style>
